<!-- Sidebar -->
<aside class="sidebar" [class.collapsed]="isCollapsed" [class.mobile-open]="isMobileMenuOpen">
  <!-- Header del Sidebar -->
  <div class="sidebar-header">
    <div class="logo-container">
      <div class="logo">
        <span class="logo-icon">A</span>
      </div>
      @if (!isCollapsed) {
        <div class="logo-text">
          <h2>AgriCol</h2>
          <p>Gesti贸n Inteligente</p>
        </div>
      }
    </div>
  </div>

  <!-- (YA SIN BOTN AQU) -->

  <!-- Navegaci贸n Principal -->
  <nav class="sidebar-nav">
    <ul class="nav-list">
      @for (item of filteredMenuItems; track item) {
        <li class="nav-item">
          <a
            [routerLink]="item.route"
            class="nav-link"
            [class.active]="isActive(item.route)"
            [title]="item.label"
            (click)="closeMobileMenu()">
            <!-- Inicial del m贸dulo -->
            <span class="nav-icon">
              {{ item.label[0] | uppercase }}
            </span>
            @if (!isCollapsed) {
              <span class="nav-label">{{ item.label }}</span>
            }
          </a>
        </li>
      }
    </ul>
  </nav>

  <!-- Footer del Sidebar (Usuario) -->
  <div class="sidebar-footer">
    <div class="user-info">
      <div class="user-avatar">
        <span>{{ userName.charAt(0).toUpperCase() }}</span>
      </div>
      @if (!isCollapsed) {
        <div class="user-details">
          <p class="user-name">{{ userName }}</p>
          <p class="user-role">{{ userRole }}</p>
        </div>
      }
    </div>

    <button
      class="logout-btn"
      (click)="logout()"
      [title]="isCollapsed ? 'Cerrar Sesi贸n' : ''">
      <span class="logout-icon"></span>
      @if (!isCollapsed) {
        <span>Cerrar Sesi贸n</span>
      }
    </button>

    <!--  Flecha para colapsar/expandir, ahora debajo del usuario -->
    <button class="toggle-btn" (click)="toggleSidebar()" [class.collapsed]="isCollapsed">
      <span class="arrow" [class.rotated]="isCollapsed"></span>
    </button>
  </div>
</aside>
