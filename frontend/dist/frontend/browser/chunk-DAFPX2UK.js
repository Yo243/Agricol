import{a as x}from"./chunk-SNMUZVJ4.js";import"./chunk-2F5RLYLV.js";import{d as w,g as O}from"./chunk-YAFIELCV.js";import{b as y,d as S,e as k,f as E,g as z,h as L,q as T,t as V}from"./chunk-B4I6E7XD.js";import{$a as h,Ga as v,Q as f,Ra as c,Sa as e,Ta as n,Ua as a,X as l,Y as s,Zb as P,ib as d,kb as r,lb as p,pb as M,qa as o,qb as C,rb as b}from"./chunk-PCLR6J3H.js";import"./chunk-FDERIQAA.js";var j=class _{authService=f(x);router=f(w);email="";password="";loading=!1;showPassword=!1;errorMessage="";errorType="";onSubmit(){if(this.errorMessage="",this.errorType="",!this.email||!this.password){this.showError("Por favor completa todos los campos","credentials");return}if(!this.isValidEmail(this.email)){this.showError("Por favor ingresa un email v\xE1lido","credentials");return}this.login()}login(){this.loading=!0,this.authService.login({email:this.email,password:this.password}).subscribe({next:i=>{console.log("Login exitoso:",i),this.loading=!1,this.router.navigate(["/dashboard"])},error:i=>{console.error("Error en login:",i),this.loading=!1,i.statusCode===403?this.showError(i.message,"inactive"):i.statusCode===401?this.showError(i.message,"credentials"):this.showError(i.message,"server")}})}showError(i,m){this.errorMessage=i,this.errorType=m}togglePasswordVisibility(){this.showPassword=!this.showPassword}isValidEmail(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}clearError(){this.errorMessage="",this.errorType=""}static \u0275fac=function(m){return new(m||_)};static \u0275cmp=v({type:_,selectors:[["app-login"]],decls:69,vars:25,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-wrapper"],[1,"logo-emoji"],[1,"login-title"],[1,"login-subtitle"],[1,"alert","alert-error"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"alert-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"alert-content"],[1,"alert-message"],[1,"alert-close",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"alert","alert-inactive"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"alert-title"],[1,"alert-help"],[1,"alert","alert-warning"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"input-wrapper"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"input-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],["type","email","name","email","placeholder","tu@email.com","autocomplete","email","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],["name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","required","",1,"form-input",3,"ngModelChange","type","ngModel","disabled"],["type","button",1,"input-toggle",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],["type","submit",1,"btn-login",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"btn-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],["fill","none","viewBox","0 0 24 24",1,"btn-icon","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"login-footer"],[1,"footer-text"],[1,"footer-subtext"]],template:function(m,t){m&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"\u{1F33E}"),n()(),e(6,"h1",5),r(7,"AgriCol"),n(),e(8,"p",6),r(9,"Sistema de Gesti\xF3n Agr\xEDcola"),n()(),e(10,"div",7),l(),e(11,"svg",8),a(12,"path",9),n(),s(),e(13,"div",10)(14,"p",11),r(15),n()(),e(16,"button",12),h("click",function(){return t.clearError()}),l(),e(17,"svg",13),a(18,"path",14),n()()(),s(),e(19,"div",15),l(),e(20,"svg",8),a(21,"path",16),n(),s(),e(22,"div",10)(23,"p",17),r(24,"Cuenta Desactivada"),n(),e(25,"p",11),r(26),n(),e(27,"p",18),r(28,"Si crees que esto es un error, contacta al administrador del sistema."),n()()(),e(29,"div",19),l(),e(30,"svg",8),a(31,"path",20),n(),s(),e(32,"div",10)(33,"p",11),r(34),n()()(),e(35,"form",21),h("ngSubmit",function(){return t.onSubmit()}),e(36,"div",22)(37,"label",23),r(38,"Correo Electr\xF3nico"),n(),e(39,"div",24),l(),e(40,"svg",25),a(41,"path",26),n(),s(),e(42,"input",27),b("ngModelChange",function(g){return C(t.email,g)||(t.email=g),g}),n()()(),e(43,"div",22)(44,"label",23),r(45,"Contrase\xF1a"),n(),e(46,"div",24),l(),e(47,"svg",25),a(48,"path",16),n(),s(),e(49,"input",28),b("ngModelChange",function(g){return C(t.password,g)||(t.password=g),g}),n(),e(50,"button",29),h("click",function(){return t.togglePasswordVisibility()}),l(),e(51,"svg",13),a(52,"path",30)(53,"path",31),n(),e(54,"svg",13),a(55,"path",32),n()()()(),s(),e(56,"button",33),l(),e(57,"svg",34),a(58,"path",35),n(),e(59,"svg",36),a(60,"circle",37)(61,"path",38),n(),s(),e(62,"span"),r(63),n()()(),e(64,"div",39)(65,"p",40),r(66,"\xA9 2024 AgriCol. Todos los derechos reservados."),n(),e(67,"p",41),r(68,"Sistema de Gesti\xF3n Empresarial Agr\xEDcola"),n()()()()),m&2&&(o(10),d("hidden",!t.errorMessage||t.errorType!=="credentials"),o(5),p(t.errorMessage),o(4),d("hidden",!t.errorMessage||t.errorType!=="inactive"),o(7),p(t.errorMessage),o(3),d("hidden",!t.errorMessage||t.errorType!=="server"),o(5),p(t.errorMessage),o(8),M("ngModel",t.email),c("disabled",t.loading),o(7),c("type",t.showPassword?"text":"password"),M("ngModel",t.password),c("disabled",t.loading),o(),c("disabled",t.loading),o(),d("hidden",t.showPassword),o(3),d("hidden",!t.showPassword),o(2),c("disabled",t.loading),o(),d("hidden",t.loading),o(2),d("hidden",!t.loading),o(4),p(t.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"))},dependencies:[P,V,L,y,S,k,T,z,E,O],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem;background:linear-gradient(135deg,#ecfdf5,#d1fae5)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;border-radius:16px;box-shadow:0 10px 40px #0000001a;padding:2rem}@media (min-width: 640px){.login-card[_ngcontent-%COMP%]{padding:2.5rem}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-wrapper[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;background:linear-gradient(135deg,#1a7f5a,#10b981);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #1a7f5a33}.logo-emoji[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#111827;margin:0 0 .5rem}.login-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#6b7280;margin:0}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem;display:flex;align-items:flex-start;gap:.75rem;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.alert-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0;margin-top:2px}.alert-content[_ngcontent-%COMP%]{flex:1;min-width:0}.alert-title[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;margin:0 0 .25rem}.alert-message[_ngcontent-%COMP%]{font-size:.875rem;margin:0;line-height:1.5}.alert-help[_ngcontent-%COMP%]{font-size:.8rem;margin:.5rem 0 0;line-height:1.4;opacity:.9}.alert-close[_ngcontent-%COMP%]{width:20px;height:20px;padding:0;border:none;background:transparent;cursor:pointer;flex-shrink:0;opacity:.5;transition:opacity .2s ease}.alert-close[_ngcontent-%COMP%]:hover{opacity:1}.alert-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.alert-error[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#991b1b}.alert-error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#dc2626}.alert-error[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#991b1b}.alert-inactive[_ngcontent-%COMP%]{background:#fef3c7;border:1px solid #fcd34d;color:#78350f}.alert-inactive[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f59e0b}.alert-inactive[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#92400e}.alert-warning[_ngcontent-%COMP%]{background:#fffbeb;border:1px solid #fde68a;color:#92400e}.alert-warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f59e0b}.login-form[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:.875rem;width:20px;height:20px;color:#9ca3af;pointer-events:none}.form-input[_ngcontent-%COMP%]{width:100%;padding:.875rem .875rem .875rem 3rem;border:1px solid #d1d5db;border-radius:8px;font-size:.95rem;font-family:inherit;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a7f5a;box-shadow:0 0 0 3px #1a7f5a14}.form-input[_ngcontent-%COMP%]:disabled{background:#f9fafb;cursor:not-allowed;opacity:.6}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input-toggle[_ngcontent-%COMP%]{position:absolute;right:.875rem;width:24px;height:24px;padding:0;border:none;background:transparent;cursor:pointer;color:#6b7280;transition:color .2s ease}.input-toggle[_ngcontent-%COMP%]:hover:not(:disabled){color:#1a7f5a}.input-toggle[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.input-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn-login[_ngcontent-%COMP%]{width:100%;padding:.875rem 1.5rem;background:#1a7f5a;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.95rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease;margin-top:1.5rem}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){background:#166649;transform:translateY(-1px);box-shadow:0 4px 12px #1a7f5a4d}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-icon[_ngcontent-%COMP%]{width:20px;height:20px}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{text-align:center;padding-top:1.5rem;border-top:1px solid #f3f4f6}.footer-text[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin:0 0 .25rem}.footer-subtext[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af;margin:0}@media (max-width: 639px){.login-container[_ngcontent-%COMP%]{padding:.5rem}.login-card[_ngcontent-%COMP%]{padding:1.5rem}.logo-wrapper[_ngcontent-%COMP%]{width:64px;height:64px}.logo-emoji[_ngcontent-%COMP%]{font-size:2rem}.login-title[_ngcontent-%COMP%]{font-size:1.75rem}.alert[_ngcontent-%COMP%]{padding:.875rem;gap:.625rem}.alert-icon[_ngcontent-%COMP%]{width:18px;height:18px}.alert-message[_ngcontent-%COMP%]{font-size:.8rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-input[_ngcontent-%COMP%]{padding:.75rem .75rem .75rem 2.75rem}.btn-login[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:.9rem}}.hidden[_ngcontent-%COMP%]{display:none!important}.opacity-25[_ngcontent-%COMP%]{opacity:.25}.opacity-75[_ngcontent-%COMP%]{opacity:.75}"]})};export{j as LoginComponent};
