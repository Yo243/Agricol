import{a as I}from"./chunk-N2V55WLV.js";import"./chunk-2F5RLYLV.js";import{e as z,g as L}from"./chunk-YAFIELCV.js";import{$a as b,Ba as C,Ga as M,Ka as u,Ra as m,Sa as e,Ta as t,Tb as w,Ua as s,Ub as k,Vb as O,Wb as E,X as l,Y as c,Zb as y,bb as p,hb as P,ib as x,kb as i,lb as g,mb as f,qa as r,tb as S,wb as v,xb as _}from"./chunk-PCLR6J3H.js";import"./chunk-FDERIQAA.js";var H=a=>["/periodos-siembra",a];function D(a,o){a&1&&(e(0,"div",20),l(),e(1,"svg",21),s(2,"circle",22)(3,"path",23),t(),c(),e(4,"p",24),i(5,"Cargando per\xEDodos..."),t()())}function F(a,o){a&1&&(e(0,"div",25),l(),e(1,"svg",26),s(2,"path",4),t(),c(),e(3,"h3",27),i(4,"No hay per\xEDodos de siembra"),t(),e(5,"p",28),i(6,"Crea tu primer per\xEDodo de siembra para comenzar a dar seguimiento a tus cultivos"),t(),e(7,"button",29),l(),e(8,"svg",9),s(9,"path",10),t(),c(),e(10,"span"),i(11,"Crear Primer Per\xEDodo"),t()()())}function G(a,o){if(a&1&&(e(0,"div",54)(1,"div",55)(2,"span",56),i(3,"Progreso del Ciclo"),t(),e(4,"span",57),i(5),t()(),e(6,"div",58),s(7,"div",59),t()()),a&2){let n=p().$implicit,d=p(2);r(5),f("",d.calcularProgreso(n),"%"),r(2),P("width",d.calcularProgreso(n),"%")}}function B(a,o){if(a&1&&(e(0,"div",61)(1,"span",62),i(2,"Rendimiento Esperado:"),t(),e(3,"span",65),i(4),t()()),a&2){let n=p(2).$implicit;r(4),f("",n.rendimientoEsperado," ton/ha")}}function N(a,o){if(a&1&&(e(0,"div",60)(1,"div",61)(2,"span",62),i(3,"Rendimiento Real:"),t(),e(4,"span",63),i(5),t()(),u(6,B,5,1,"div",64),t()),a&2){let n=p().$implicit;r(5),f("",n.rendimientoReal," ton/ha"),r(),m("ngIf",n.rendimientoEsperado)}}function R(a,o){if(a&1&&(e(0,"div",32)(1,"div",33)(2,"div",34)(3,"h3",35),i(4),t(),e(5,"span",36),i(6),t()(),e(7,"span",37),i(8),t()(),e(9,"div",38)(10,"div",39),l(),e(11,"svg",40),s(12,"path",41),t(),c(),e(13,"div",42)(14,"span",43),i(15,"Parcela"),t(),e(16,"span",44),i(17),t()()(),e(18,"div",39),l(),e(19,"svg",40),s(20,"path",45),t(),c(),e(21,"div",42)(22,"span",43),i(23,"Hect\xE1reas"),t(),e(24,"span",44),i(25),t()()(),e(26,"div",39),l(),e(27,"svg",40),s(28,"path",46),t(),c(),e(29,"div",42)(30,"span",43),i(31,"Fecha Siembra"),t(),e(32,"span",44),i(33),v(34,"date"),t()()(),e(35,"div",39),l(),e(36,"svg",40),s(37,"path",47),t(),c(),e(38,"div",42)(39,"span",43),i(40,"Cosecha Esperada"),t(),e(41,"span",44),i(42),v(43,"date"),t()()()(),u(44,G,8,3,"div",48)(45,N,7,2,"div",49),e(46,"button",50),l(),e(47,"svg",51),s(48,"path",52)(49,"path",53),t(),c(),e(50,"span"),i(51,"Ver Detalle"),t()()()),a&2){let n=o.$implicit,d=p(2);r(4),g(n.cultivo==null?null:n.cultivo.nombre),r(2),g(n.codigo),r(),m("ngClass",d.getEstadoBadgeClass(n.estado)),r(),f(" ",n.estado," "),r(9),g(n.parcela==null?null:n.parcela.nombre),r(8),f("",n.hectareasSembradas," ha"),r(8),g(_(34,11,n.fechaInicio,"dd/MM/yyyy")),r(9),g(_(43,14,n.fechaCosechaEsperada,"dd/MM/yyyy")),r(2),m("ngIf",n.estado==="En Curso"),r(),m("ngIf",n.estado==="Finalizado"&&n.rendimientoReal),r(),m("routerLink",S(17,H,n.id))}}function A(a,o){if(a&1&&(e(0,"div",30),u(1,R,52,19,"div",31),t()),a&2){let n=p();r(),m("ngForOf",n.periodos)}}var T=class a{constructor(o){this.periodosService=o}periodos=[];loading=!0;filtroEstado="todos";ngOnInit(){this.loadPeriodos()}loadPeriodos(){this.loading=!0,this.filtroEstado==="activos"?this.periodosService.getActivos().subscribe({next:o=>{this.periodos=o,this.loading=!1},error:o=>{console.error("Error:",o),this.loading=!1}}):this.periodosService.getAll().subscribe({next:o=>{this.filtroEstado==="finalizados"?this.periodos=o.filter(n=>n.estado==="Finalizado"):this.periodos=o,this.loading=!1},error:o=>{console.error("Error:",o),this.loading=!1}})}cambiarFiltro(o){this.filtroEstado=o,this.loadPeriodos()}calcularProgreso(o){if(!o.fechaInicio||!o.fechaCosechaEsperada)return 0;let n=new Date,d=new Date(o.fechaInicio),h=new Date(o.fechaCosechaEsperada);if(n<d)return 0;if(n>h)return 100;let V=h.getTime()-d.getTime(),j=n.getTime()-d.getTime();return Math.round(j/V*100)}getEstadoBadgeClass(o){switch(o){case"En Curso":return"badge-success";case"Finalizado":return"badge-secondary";case"Cancelado":return"badge-danger";default:return"badge-info"}}static \u0275fac=function(n){return new(n||a)(C(I))};static \u0275cmp=M({type:a,selectors:[["app-periodo-siembra-list"]],decls:34,vars:9,consts:[[1,"periodos-container"],[1,"page-header"],[1,"header-content"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"header-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"],[1,"header-text"],[1,"page-title"],[1,"page-subtitle"],["routerLink","/periodos-siembra/nuevo",1,"btn-create"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"filters-tabs-card"],[1,"filter-tab",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"tab-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","periodos-grid",4,"ngIf"],[1,"loading-container"],["fill","none","viewBox","0 0 24 24",1,"loading-spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"loading-text"],[1,"empty-state"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],["routerLink","/periodos-siembra/nuevo",1,"btn-empty-action"],[1,"periodos-grid"],["class","periodo-card",4,"ngFor","ngForOf"],[1,"periodo-card"],[1,"periodo-header"],[1,"header-left"],[1,"periodo-title"],[1,"periodo-codigo"],[1,"periodo-badge",3,"ngClass"],[1,"periodo-body"],[1,"info-item"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],[1,"info-content"],[1,"info-label"],[1,"info-value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],["class","periodo-progress",4,"ngIf"],["class","periodo-rendimiento",4,"ngIf"],[1,"btn-detail",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"periodo-progress"],[1,"progress-header"],[1,"progress-label"],[1,"progress-value"],[1,"progress-bar"],[1,"progress-fill"],[1,"periodo-rendimiento"],[1,"rendimiento-row"],[1,"rendimiento-label"],[1,"rendimiento-value","rendimiento-success"],["class","rendimiento-row",4,"ngIf"],[1,"rendimiento-value"]],template:function(n,d){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),l(),e(3,"svg",3),s(4,"path",4),t(),c(),e(5,"div",5)(6,"h1",6),i(7,"Per\xEDodos de Siembra"),t(),e(8,"p",7),i(9,"Gestiona los ciclos de cultivo en tus parcelas"),t()()(),e(10,"button",8),l(),e(11,"svg",9),s(12,"path",10),t(),c(),e(13,"span"),i(14,"Nuevo Per\xEDodo"),t()()(),e(15,"div",11)(16,"button",12),b("click",function(){return d.cambiarFiltro("todos")}),l(),e(17,"svg",13),s(18,"path",14),t(),c(),e(19,"span"),i(20,"Todos"),t()(),e(21,"button",12),b("click",function(){return d.cambiarFiltro("activos")}),l(),e(22,"svg",13),s(23,"path",15),t(),c(),e(24,"span"),i(25,"Activos"),t()(),e(26,"button",12),b("click",function(){return d.cambiarFiltro("finalizados")}),l(),e(27,"svg",13),s(28,"path",16),t(),c(),e(29,"span"),i(30,"Finalizados"),t()()(),u(31,D,6,0,"div",17)(32,F,12,0,"div",18)(33,A,2,1,"div",19),t()),n&2&&(r(16),x("tab-active",d.filtroEstado==="todos"),r(5),x("tab-active",d.filtroEstado==="activos"),r(5),x("tab-active",d.filtroEstado==="finalizados"),r(5),m("ngIf",d.loading),r(),m("ngIf",!d.loading&&d.periodos.length===0),r(),m("ngIf",!d.loading&&d.periodos.length>0))},dependencies:[y,w,k,O,L,z,E],styles:[".periodos-container[_ngcontent-%COMP%]{padding:1rem;max-width:1600px;margin:0 auto;background:#fafafa;min-height:100vh}@media (min-width: 768px){.periodos-container[_ngcontent-%COMP%]{padding:2rem}}.page-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:2rem;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 1px 3px #00000014}@media (min-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:flex-start;padding:2rem}}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.header-icon[_ngcontent-%COMP%]{width:32px;height:32px;color:#1a7f5a;flex-shrink:0}.header-text[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827;margin:0 0 .25rem}@media (min-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:1.875rem}}.page-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;margin:0}.btn-create[_ngcontent-%COMP%]{padding:.875rem 1.5rem;background:#1a7f5a;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.95rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease;width:100%}@media (min-width: 768px){.btn-create[_ngcontent-%COMP%]{width:auto}}.btn-create[_ngcontent-%COMP%]:hover{background:#166649}.filters-tabs-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #00000014;padding:.75rem;margin-bottom:2rem;display:flex;gap:.5rem;overflow-x:auto}.filter-tab[_ngcontent-%COMP%]{flex:1;min-width:fit-content;padding:.75rem 1.25rem;background:transparent;border:none;border-radius:8px;font-weight:600;font-size:.9rem;color:#6b7280;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease}.filter-tab[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#111827}.tab-active[_ngcontent-%COMP%]{background:#1a7f5a!important;color:#fff!important}.tab-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 1px 3px #00000014}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;color:#1a7f5a;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:.95rem;color:#6b7280;font-weight:500;margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 1px 3px #00000014}.empty-icon[_ngcontent-%COMP%]{width:72px;height:72px;margin:0 auto 1.5rem;color:#d1d5db}.empty-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0 0 .5rem}.empty-description[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;margin:0 0 1.5rem;line-height:1.5}.btn-empty-action[_ngcontent-%COMP%]{padding:.875rem 1.5rem;background:#1a7f5a;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.95rem;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:all .2s ease}.btn-empty-action[_ngcontent-%COMP%]:hover{background:#166649}.periodos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem}@media (min-width: 640px){.periodos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.periodos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.periodo-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1.25rem;display:flex;flex-direction:column;gap:1rem;transition:all .2s ease}.periodo-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;border-color:#d1d5db}.periodo-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;padding-bottom:1rem;border-bottom:1px solid #f3f4f6}.header-left[_ngcontent-%COMP%]{flex:1;min-width:0}.periodo-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0 0 .25rem}.periodo-codigo[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.periodo-badge[_ngcontent-%COMP%]{padding:.375rem .875rem;border-radius:999px;font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;white-space:nowrap;flex-shrink:0;border:1px solid}.badge-en-curso[_ngcontent-%COMP%]{background:#fffbeb;color:#92400e;border-color:#fde68a}.badge-finalizado[_ngcontent-%COMP%]{background:#ecfdf5;color:#065f46;border-color:#a7f3d0}.badge-cancelado[_ngcontent-%COMP%]{background:#fef2f2;color:#991b1b;border-color:#fecaca}.periodo-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.875rem}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.info-icon[_ngcontent-%COMP%]{width:40px;height:40px;padding:.625rem;background:#f9fafb;border-radius:8px;color:#1a7f5a;flex-shrink:0}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;flex:1;min-width:0}.info-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.05em}.info-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#111827}.periodo-progress[_ngcontent-%COMP%]{padding-top:1rem;border-top:1px solid #f3f4f6}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.progress-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#6b7280}.progress-value[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;color:#1a7f5a}.progress-bar[_ngcontent-%COMP%]{height:8px;background:#f3f4f6;border-radius:999px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#1a7f5a,#10b981);transition:width .3s ease}.periodo-rendimiento[_ngcontent-%COMP%]{background:#f9fafb;padding:.875rem;border-radius:8px;display:flex;flex-direction:column;gap:.5rem}.rendimiento-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rendimiento-label[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;font-weight:500}.rendimiento-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#111827}.rendimiento-success[_ngcontent-%COMP%]{color:#10b981}.btn-detail[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#f9fafb;color:#1a7f5a;border:1px solid #e5e7eb;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s ease;text-decoration:none}.btn-detail[_ngcontent-%COMP%]:hover{background:#ecfdf5;border-color:#1a7f5a}.w-4[_ngcontent-%COMP%]{width:1rem;height:1rem}.w-5[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}@media (max-width: 639px){.periodos-container[_ngcontent-%COMP%]{padding:.75rem}.page-header[_ngcontent-%COMP%]{padding:1.25rem}.page-title[_ngcontent-%COMP%]{font-size:1.25rem}.header-icon[_ngcontent-%COMP%]{width:28px;height:28px}.filters-tabs-card[_ngcontent-%COMP%]{padding:.5rem}.filter-tab[_ngcontent-%COMP%]{padding:.625rem 1rem;font-size:.85rem}.tab-icon[_ngcontent-%COMP%]{width:16px;height:16px}.periodo-card[_ngcontent-%COMP%]{padding:1rem}.periodo-title[_ngcontent-%COMP%]{font-size:1rem}}"]})};export{T as PeriodoSiembraListComponent};
